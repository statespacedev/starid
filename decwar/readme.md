# decwar

historic fortran and assembly code running on simh pdp10 with standard tops10. this is a living time capsule of how things were done in the fifties and sixties. assembly and fortran, deeply fused together. here's [game instructions](decwar.md), the excellent [decwar wikipedia page](https://en.wikipedia.org/wiki/Decwar), the [utexas center for american history](https://briscoecenter.org/) catalog items [v2.2](https://repositories.lib.utexas.edu/items/1aa48343-09ab-4b3b-a9f2-e2e525074a4d) and [v2.3](https://repositories.lib.utexas.edu/items/7e2ccf50-e814-4bce-91d2-a7f6440eabe4), and a 1982 letter from utexas to compuserve, before utexas sent the primordial decwar tape.

_I have received your request for sources to the DECWAR program. We will be pleased to send you the sources, but first we must ask you to sign and return the enclosed license agreement. DECWAR was developed at the University of Texas at Austin, and it is being maintained. Hence our interest in using the agreement to record and control who gets the source to it._

_DECWAR is a sophisticated real-time space battle game designed to be played by from 1 to 18 people. It was written at the University of Texas at Austin, primarily by Jeff Potter and Bob Hysick. The game was originally based on a very limited, single job, single terminal, two player Star Trek type game known as WAR. This game came from the CDC-6600/6400 system at the University of Texas at Austin, author unknown. Robert Schneider re-wrote the original source on the CDC and started the transfer to the DEC-10. In the transfer process, the game was renamed to DECWAR, largely re-designed, and almost entirely re-written, so that the current version bears little resemblance to the original. Almost all the commands were added once the game was on the DEC-10, as well as the basic concept of separate jobs controlling each ship, and most of the other features that make the game challenging, exciting, and enjoyable. The first version was installed on the DEC-10 in August 1978. After several revisions, a greatly enhanced and improved game, version 2.0, was installed in July 1979._

# folder structure

- in the root folder are four important files from the primordial tape sent from utexas to compuserve. these give a good picture of what the primordial tape and original utexas decwar2.3 were like.
  - decwar.ltr 'letter' from utexas concerning the distribution tape
  - decwar.com 'comments' around individual files
  - decwar.imp 'important' additional comments
  - decwar.tap 'tape' listing
- stage1 is what merlyn got working on simh pdp10, _all changes commented and additions noted by DrForbin AKA Merlyn Cousins. search for (drforbin), all things yet to be fixed, search (tofix)_ here's [more info](docs/app0-foundations.md) from merlyn around that.
  - utexas folder is an initial attempt to moves backwards towards the primordial tape. in the root are 
    - utexas/hlp are files used as part of building the game's help system. note especially the 'comments' in hlp.com
    - utexas/tec are teco files for extracting fortran from macro
    - utexas/msc are auto generated by teco. is it possible to revive this teco auto generation? for now, we're also putting the four core 'stub' files here also. high.for, low.for, msg.mac, setmsg.mac. so they don't distract in the main folder.
  - compuserve folder is fortran and macro files likely associated with compuserve, or at least not definitely shown as part of the primordial tape. they're not shown in decwar.imp and decwar.tap!
    - compuserve/docs folder is files associated with compuserve documenting the primordial tape's arrival from utexas. also some related 'operational' files. decwar.map has logging from a compuserve ki10 dated 19820519.
    - scripts folder is build automations
- stage2

looking at decwar.imp, there's kind of seven 'core' code files. these seven files are in the main folder, above the four subfolders. Files from which the GAM: files are derived: DECWAR.EXE:
    
    HIGH.FOR	Used to force common block into high segment.
    LOW.FOR	Used to force common block into low segment.
    DECWAR.FOR	FORTRAN source.
    WARMAC.MAC	MACRO source.
    MSG.MAC	Output text source.
    SETUP.FOR	Once only code, deleted from core after initialization.
    SETMSG.MAC	Equivalent to MSG.MAC for SETUP text strings.

the high.for and low.for are stubs. somewhat likewise for msg.mac and setmsg.mac. maybe the real challenge is understanding these three files.

    SETUP.FOR
    DECWAR.FOR
    WARMAC.MAC

in fact, at least for now, we'll reflect that view by moving the other four into the 'include' subfolder.

teco scripts are associated with include files

    lowseg.tec -> lowseg.for
    hiseg.tec  -> hiseg.for
    param.tec  -> param.for

probably the scripts simply search through warmac.mac and pick out 'variables' that need to appear in the include for files. this can be done manually. if there's an update to warmac.mac, include for files can be manually updated. the teco scripts probably just automate this, generating the include for 'from scratch'. so it's not a 'must have'. can be done by hand. but possibly nice. and an interesting usage of teco.
